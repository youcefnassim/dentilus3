<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rendez-vous - Bright Smile Dental Clinic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <img src="logo.jpg" alt="Bright Smile Dental Clinic" class="logo-image">
            <h1>Bright Smile</h1>
            <p>Gestion de cabinet dentaire</p>
        </div>
        
        <ul class="menu">
            <li><a href="Accueil.html"><i class="fas fa-home"></i> <span>Accueil</span></a></li>
            <li><a href="ordonnance.html"><i class="fas fa-prescription"></i> <span>Ordonnances</span></a></li>
            <li><a href="médicaments.html"><i class="fas fa-pills"></i> <span>Médicaments</span></a></li>
            <li><a href="traitement.html"><i class="fas fa-teeth"></i> <span>Traitements</span></a></li>
            <li><a href="travauxode.html"><i class="fas fa-tooth"></i> <span>Travaux ODE</span></a></li>
            <li><a href="laboratoire.html"><i class="fas fa-flask"></i> <span>Laboratoire</span></a></li>
            <li><a href="Rdvs.html" class="active"><i class="fas fa-calendar-alt"></i> <span>RDVs</span></a></li>
            <li><a href="galerie.html"><i class="fas fa-images"></i> <span>La Galerie</span></a></li>
            <li><a href="complément.html"><i class="fas fa-chart-bar"></i> <span>Complément</span></a></li>
            <li><a href="statistique.html"><i class="fas fa-chart-line"></i> <span>Statistique</span></a></li>
            <li><a href="paramètres.html"><i class="fas fa-cog"></i> <span>Paramètres</span></a></li>
            <li><a href="documentation.html"><i class="fas fa-book"></i> <span>Documentation</span></a></li>
            <li><a href="medecin/login.php"><i class="fas fa-user-md"></i> <span>Espace Médecin</span></a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <div class="header-left">
                <h2>Gestion des Rendez-vous</h2>
                <div class="current-time-display">
                    <i class="fas fa-clock"></i>
                    <span class="current-time">--:--</span>
                </div>
            </div>
            <div class="user-info">
                <img src="https://ui-avatars.com/api/?name=Dr+Dentiste&background=1976d2&color=fff" alt="Docteur">
                <div>
                    <div>Dr. AYAD SOUMIA</div>
                    <small>Dentiste</small>
                    <div class="status-indicator status-online"></div>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h3>RDVs aujourd'hui</h3>
                    <i class="fas fa-calendar-day"></i>
                </div>
                <div class="stat">12</div>
                <p class="stat-desc">Programmés</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>RDVs cette semaine</h3>
                    <i class="fas fa-calendar-week"></i>
                </div>
                <div class="stat">42</div>
                <p class="stat-desc">À venir</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Annulations</h3>
                    <i class="fas fa-calendar-times"></i>
                </div>
                <div class="stat">3</div>
                <p class="stat-desc">Ce mois-ci</p>
            </div>
        </div>

        <!-- Section de recherche et filtres -->
        <div class="filter-section">
            <div class="filter-row">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Rechercher un RDV..." id="appointmentSearch">
                </div>
                <select id="dateFilter">
                    <option value="">Toutes les dates</option>
                    <option value="today">Aujourd'hui</option>
                    <option value="week">Cette semaine</option>
                    <option value="month">Ce mois</option>
                </select>
                <button class="btn-primary" onclick="createNewAppointment()">
                    <i class="fas fa-plus"></i> Nouveau RDV
                </button>
            </div>
        </div>

        <div class="waiting-room">
            <div class="waiting-room-header">
                <h3><i class="fas fa-calendar-check"></i> Rendez-vous d'aujourd'hui</h3>
                <div class="waiting-stats">
                    <span class="badge badge-info">4 RDVs</span>
                    <span class="badge badge-success">2 terminés</span>
                </div>
            </div>
            <div class="patient-list">
                <div class="patient-card card-with-actions">
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="startAppointment('Marie Lambert')" title="Commencer">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="card-action-btn" onclick="editAppointment('Marie Lambert')" title="Modifier">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="card-action-btn" onclick="cancelAppointment('Marie Lambert')" title="Annuler">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <h4>Marie Lambert</h4>
                    <p><i class="far fa-clock"></i> Heure: 09:30</p>
                    <p><i class="fas fa-stethoscope"></i> Motif: Contrôle annuel</p>
                    <div class="patient-priority">
                        <span class="badge badge-success">En cours</span>
                    </div>
                </div>
                <div class="patient-card card-with-actions">
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="startAppointment('Pierre Dubois')" title="Commencer">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="card-action-btn" onclick="editAppointment('Pierre Dubois')" title="Modifier">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="card-action-btn" onclick="cancelAppointment('Pierre Dubois')" title="Annuler">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <h4>Pierre Dubois</h4>
                    <p><i class="far fa-clock"></i> Heure: 10:45</p>
                    <p><i class="fas fa-stethoscope"></i> Motif: Détartrage</p>
                    <div class="patient-priority">
                        <span class="badge badge-info">En attente</span>
                    </div>
                </div>
                <div class="patient-card card-with-actions">
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="startAppointment('Julie Moreau')" title="Commencer">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="card-action-btn" onclick="editAppointment('Julie Moreau')" title="Modifier">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="card-action-btn" onclick="cancelAppointment('Julie Moreau')" title="Annuler">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <h4>Julie Moreau</h4>
                    <p><i class="far fa-clock"></i> Heure: 14:00</p>
                    <p><i class="fas fa-stethoscope"></i> Motif: Urgence dentaire</p>
                    <div class="patient-priority">
                        <span class="badge badge-error">Urgent</span>
                    </div>
                </div>
                <div class="patient-card card-with-actions">
                    <div class="card-actions">
                        <button class="card-action-btn" onclick="startAppointment('Thomas Bernard')" title="Commencer">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="card-action-btn" onclick="editAppointment('Thomas Bernard')" title="Modifier">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="card-action-btn" onclick="cancelAppointment('Thomas Bernard')" title="Annuler">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <h4>Thomas Bernard</h4>
                    <p><i class="far fa-clock"></i> Heure: 16:30</p>
                    <p><i class="fas fa-stethoscope"></i> Motif: Plombage</p>
                    <div class="patient-priority">
                        <span class="badge badge-info">En attente</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section des alertes -->
        <div class="alert alert-success">
            <i class="fas fa-check-circle"></i>
            <span>2 rendez-vous ont été complétés avec succès aujourd'hui.</span>
        </div>

        <div class="footer">
            <p>Avec <span class="highlight">Bright Smile</span> votre cabinet désormais bien organisé</p>
            <p>© 2025 Bright Smile Dental Clinic - Tous droits réservés</p>
        </div>
    </div>

    <script src="script.js"></script>
    <!-- Slide booking panel (shared) -->
    <style>
    .slide-panel{position:fixed;right:-420px;top:0;width:400px;height:100%;background:#fff;box-shadow:-4px 0 12px rgba(0,0,0,.15);transition:right .28s ease;padding:20px;z-index:9999;overflow:auto}
    .slide-panel.open{right:0}
    .slide-panel .close{position:absolute;left:8px;top:8px;border:0;background:#eee;padding:6px 10px;border-radius:4px;cursor:pointer}
    .slide-panel h3{margin-top:10px}
    .slide-panel form input,.slide-panel form textarea,.slide-panel form select{width:100%;padding:8px;margin:6px 0;border:1px solid #ddd;border-radius:4px}
    .slide-panel form button{background:#1976d2;color:#fff;padding:10px 14px;border:0;border-radius:4px;cursor:pointer}
    .open-booking-btn{position:fixed;right:20px;bottom:30px;background:#1976d2;color:#fff;padding:12px 16px;border-radius:40px;box-shadow:0 6px 18px rgba(25,118,210,.25);z-index:9998;border:0;cursor:pointer}
    </style>

    <button class="open-booking-btn" onclick="toggleSlideBooking()" title="Prendre rendez-vous"><i class="fas fa-calendar-plus"></i></button>
    <div id="slideBooking" class="slide-panel" aria-hidden="true">
        <button class="close" onclick="toggleSlideBooking()">✕</button>
        <h3>Prendre un rendez-vous</h3>
        <form id="bookingForm">
            <input name="name" placeholder="Nom complet" required>
            <input name="phone" placeholder="Téléphone" required>
            <input name="email" type="email" placeholder="Email (optionnel)">
            <input name="date" type="date" required>
            <input name="time" type="time" required>
            <input name="motif" placeholder="Motif / Remarques">
            <button type="submit">Réserver</button>
        </form>
        <div id="bookingMsg" style="margin-top:12px"></div>
    </div>
    <script>
    function toggleSlideBooking(){const p=document.getElementById('slideBooking');p.classList.toggle('open');p.setAttribute('aria-hidden',!(p.classList.contains('open')))}
    document.getElementById('bookingForm').addEventListener('submit',async function(e){e.preventDefault();const f=new FormData(e.target);document.getElementById('bookingMsg').textContent='Envoi en cours...';try{const res=await fetch('medecin/api/appointments.php',{method:'POST',body:f});const json=await res.json();if(json.success){document.getElementById('bookingMsg').textContent='Rendez-vous créé — le médecin sera notifié.';e.target.reset();}else{document.getElementById('bookingMsg').textContent=json.error||'Erreur serveur';}}catch(err){document.getElementById('bookingMsg').textContent='Erreur réseau';}});
    </script>
</body>
</html>